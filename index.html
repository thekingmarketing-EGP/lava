<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#2a0000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Chicken Lava Ultra PRO ğŸ—ğŸŒ‹</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">

<style>
  :root {
    --primary: #ff4757;
    --secondary: #2f3542;
    --accent: #ffa502;
    --success: #2ed573;
    --bg-dark: #1e272e;
    --glass: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(255, 255, 255, 0.2);
    --font-main: 'Tajawal', sans-serif;
  }

  * { box-sizing: border-box; user-select: none; -webkit-user-select: none; }

  body {
    margin: 0;
    background-color: #000;
    font-family: var(--font-main);
    overflow: hidden;
    touch-action: none;
    height: 100dvh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #game-stage {
    position: relative;
    width: 100%;
    height: 100%;
    max-width: 500px;
    background: linear-gradient(180deg, #2b0000 0%, #1a0000 100%);
    overflow: hidden;
    box-shadow: 0 0 50px rgba(255, 71, 87, 0.2);
  }

  #bg-layer {
    position: absolute;
    inset: 0;
    background: url('bg.png') no-repeat bottom center;
    background-size: cover;
    opacity: 0.4;
    z-index: 1;
  }

  .hud {
    position: absolute;
    top: env(safe-area-inset-top, 20px);
    left: 20px;
    right: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 100;
    pointer-events: none;
  }

  .score-box, .lives-box {
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 8px 15px;
    border-radius: 20px;
    border: 1px solid var(--glass-border);
    color: white;
    font-weight: 800;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  }

  .lives-box span { color: var(--primary); font-size: 1.4rem; }

  #player {
    position: absolute;
    bottom: 10%;
    left: 50%;
    width: 80px;
    height: 80px;
    background: url('p.png') no-repeat center;
    background-size: contain;
    z-index: 50;
    transform: translate3d(-50%, 0, 0);
    will-change: transform;
    filter: drop-shadow(0 10px 10px rgba(0,0,0,0.5));
    transition: transform 0.05s linear;
  }

  .item {
    position: absolute;
    width: 60px;
    height: 60px;
    z-index: 10;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 40px;
    will-change: transform;
  }
  
  .item img { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3)); }

  .overlay {
    position: absolute;
    inset: 0;
    background-image: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.8)), url('bg.jpg');
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
    -webkit-backdrop-filter: blur(8px);
    z-index: 200;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .overlay.active { opacity: 1; pointer-events: all; }

  h1 {
    font-size: 3rem;
    margin: 0 0 10px;
    background: linear-gradient(to bottom, #ffcc00, #ff4757);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 4px 0 rgba(0,0,0,0.5));
  }

  .btn-start {
    background: linear-gradient(45deg, var(--primary), #ff6b81);
    color: white;
    border: none;
    padding: 15px 60px;
    font-size: 1.5rem;
    font-family: var(--font-main);
    font-weight: 900;
    border-radius: 50px;
    cursor: pointer;
    margin-top: 30px;
    box-shadow: 0 10px 20px rgba(255, 71, 87, 0.4);
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
    overflow: hidden;
  }

  .btn-start:active { transform: scale(0.95); box-shadow: 0 5px 10px rgba(255, 71, 87, 0.4); }

  .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
  @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-8px, 0, 0); } 40%, 60% { transform: translate3d(8px, 0, 0); } }

  .flash-red { animation: flashRed 0.3s; }
  @keyframes flashRed { 0% { box-shadow: inset 0 0 100px rgba(255,0,0,0.8); } 100% { box-shadow: none; } }

  .flash-blue { animation: flashBlue 0.3s; }
  @keyframes flashBlue { 0% { background: rgba(0, 168, 255, 0.4); } 100% { background: transparent; } }

  #comic-effect {
    position: absolute;
    bottom: 20px;
    right: -200px;
    width: 150px;
    z-index: 150;
    transition: right 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    filter: drop-shadow(-5px 5px 10px rgba(0,0,0,0.5));
    pointer-events: none;
  }
  #comic-effect.show { right: 10px; }

  .float-score {
    position: absolute;
    color: var(--accent);
    font-weight: bold;
    font-size: 24px;
    pointer-events: none;
    animation: floatUp 0.8s forwards;
    z-index: 60;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
  }
  @keyframes floatUp { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-50px) scale(1.5); opacity: 0; } }

  /* ---------------------------------------------------- */
  /* [CSS] Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø«ÙŠÙ… Ø§Ù„Ù„Ø¹Ø¨Ø©) */
  /* ---------------------------------------------------- */
  .live-counter {
    margin-top: 25px;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px 25px;
    border-radius: 12px;
    border: 1px solid var(--success); /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± Ù…Ù† Ø§Ù„Ø«ÙŠÙ… */
    text-align: center;
    animation: pulseBorder 2s infinite;
    backdrop-filter: blur(5px);
  }
  .live-counter span { display: block; color: #ccc; font-size: 0.9rem; margin-bottom: 5px; }
  .live-counter strong { color: var(--success); font-size: 1.8rem; font-family: monospace; letter-spacing: 2px; }
  @keyframes pulseBorder {
    0% { box-shadow: 0 0 0 0 rgba(46, 213, 115, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(46, 213, 115, 0); }
    100% { box-shadow: 0 0 0 0 rgba(46, 213, 115, 0); }
  }

</style>
</head>
<body>

<div id="game-stage">
  <div id="bg-layer"></div>
  
  <div class="hud">
    <div class="score-box">
      <span>ğŸ’</span> <span id="score-val">0</span>
    </div>
    <div class="lives-box">
      <span id="lives-val">â¤ï¸â¤ï¸â¤ï¸</span>
    </div>
  </div>

  <div id="player"></div>

  <img id="comic-effect" src="false.png" alt="Ouch!">

  <div id="start-screen" class="overlay active">
    <img src="logo.png" style="width: 120px; margin-bottom: 20px; animation: floatIcon 3s infinite ease-in-out;">
    <h1>Chicken Lava</h1>
    <p style="color: #eee; font-size: 1.1rem; line-height: 1.6;">
      Ø­Ø±Ùƒ Ø¥ØµØ¨Ø¹Ùƒ Ù„Ù„ØªØ­ÙƒÙ… ğŸ—<br>ØªØ¬Ù†Ø¨ Ø§Ù„Ù†Ø§Ø± ğŸ”¥ ÙˆØ§Ù„Ø«Ù„Ø¬ ğŸ§Š
    </p>
    
    <button class="btn-start" onclick="game.start()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ</button>

    <div class="live-counter">
        <span>Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¯Ù…Ø±ÙˆØ§ Ø§Ù„ÙˆÙ‚Øª</span>
        <strong id="visitorCount">1,000</strong>
    </div>

  </div>

  <div id="game-over-screen" class="overlay">
    <h1 style="color: var(--primary)">Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h1>
    <p style="color: #fff; font-size: 1.5rem;">Ø§Ù„Ù†ØªÙŠØ¬Ø©: <span id="final-score" style="color:var(--accent)">0</span></p>
    <button class="btn-start" onclick="game.start()">Ø§Ù„Ø¹Ø¨ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ğŸ”„</button>
  </div>
</div>

<script>
// Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª (ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ÙˆØ¬ÙˆØ¯Ø©)
const audio = {
  bgm: new Audio('bgm.mp3'),
  catch: new Audio('catch.mp3'),
  hurt: new Audio('hurt.mp3'),
  false: new Audio('false.mp3'),
  low: new Audio('f2.mp3')
};
audio.bgm.loop = true;

// ----------------------------------------------------
// [JS] ÙƒÙˆØ¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø¯Ø§Ø¯ (ÙŠØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
// ----------------------------------------------------
(function initCounter() {
    const countEl = document.getElementById('visitorCount');
    if(!countEl) return;
    let currentCount = localStorage.getItem('chicken_lava_visits'); // Ù…ÙØªØ§Ø­ Ø®Ø§Øµ Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¯ÙŠ
    if (!currentCount) { currentCount = 1000; } 
    else { currentCount = parseInt(currentCount); }

    function updateDisplay() { countEl.innerText = currentCount.toLocaleString('en-US'); }
    updateDisplay();

    setInterval(() => {
        const increase = Math.floor(Math.random() * 3) + 1;
        currentCount += increase;
        localStorage.setItem('chicken_lava_visits', currentCount);
        updateDisplay();
    }, 3000);
})();
// ----------------------------------------------------

// ÙƒØ§Ø¦Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
const game = {
  active: false,
  score: 0,
  lives: 3,
  speed: 4,
  spawnRate: 1000,
  lastSpawn: 0,
  items: [],
  playerX: 50, 
  
  elements: {
    stage: document.getElementById('game-stage'),
    player: document.getElementById('player'),
    score: document.getElementById('score-val'),
    lives: document.getElementById('lives-val'),
    startScreen: document.getElementById('start-screen'),
    endScreen: document.getElementById('game-over-screen'),
    finalScore: document.getElementById('final-score'),
    comic: document.getElementById('comic-effect')
  },

  init() {
    const moveHandler = (e) => {
      if (!this.active) return;
      e.preventDefault(); 
      
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const rect = this.elements.stage.getBoundingClientRect();
      
      let x = ((clientX - rect.left) / rect.width) * 100;
      
      this.playerX = Math.max(10, Math.min(90, x));
      
      this.elements.player.style.transform = `translate3d(-50%, 0, 0) left(${this.playerX}%)`; 
      this.elements.player.style.left = `${this.playerX}%`;
    };

    this.elements.stage.addEventListener('mousemove', moveHandler);
    this.elements.stage.addEventListener('touchmove', moveHandler, { passive: false });
    
    requestAnimationFrame((t) => this.loop(t));
  },

  start() {
    this.active = true;
    this.score = 0;
    this.lives = 3;
    this.speed = 4;
    this.items.forEach(i => i.el.remove());
    this.items = [];
    
    this.updateUI();
    this.elements.startScreen.classList.remove('active');
    this.elements.endScreen.classList.remove('active');
    this.elements.comic.classList.remove('show');
    
    audio.bgm.currentTime = 0;
    audio.bgm.play().catch(e => console.log("Audio play blocked by browser"));
  },

  spawn() {
    const isGood = Math.random() > 0.4;
    const item = document.createElement('div');
    item.className = 'item';
    
    const type = isGood 
      ? (Math.random() > 0.5 ? 'f.png' : 'bu.png') 
      : (Math.random() > 0.5 ? 'ğŸ”¥' : 'ğŸ§Š');
      
    if (isGood) {
      item.innerHTML = `<img src="${type}">`;
    } else {
      item.textContent = type;
    }

    const startX = Math.random() * 80 + 10;
    item.style.left = `${startX}%`;
    item.style.top = '-80px';
    
    this.elements.stage.appendChild(item);
    
    this.items.push({
      el: item,
      y: -80,
      x: startX,
      isGood: isGood,
      type: type
    });
  },

  loop(timestamp) {
    if (this.active) {
      if (timestamp - this.lastSpawn > (10000 / (this.speed * 10))) { 
        this.spawn();
        this.lastSpawn = timestamp;
        this.speed += 0.002;
      }

      const playerRect = this.elements.player.getBoundingClientRect();
      
      for (let i = this.items.length - 1; i >= 0; i--) {
        let item = this.items[i];
        item.y += this.speed;
        item.el.style.transform = `translate3d(0, ${item.y}px, 0)`;

        const itemRect = item.el.getBoundingClientRect();
        if (
          itemRect.bottom >= playerRect.top + 20 &&
          itemRect.top <= playerRect.bottom - 20 &&
          itemRect.left <= playerRect.right - 20 &&
          itemRect.right >= playerRect.left + 20
        ) {
          this.handleCollision(item, i, playerRect);
        }
        else if (item.y > window.innerHeight) {
          item.el.remove();
          this.items.splice(i, 1);
        }
      }
    }
    requestAnimationFrame((t) => this.loop(t));
  },

  handleCollision(item, index, pRect) {
    item.el.remove();
    this.items.splice(index, 1);

    if (item.isGood) {
      this.score += 10;
      this.playSound(audio.catch);
      this.showFloatScore(pRect.left, pRect.top, "+10");
    } else {
      this.elements.stage.classList.add('shake');
      setTimeout(() => this.elements.stage.classList.remove('shake'), 500);
      
      if (item.type === 'ğŸ”¥') {
        this.lives--;
        this.elements.stage.classList.add('flash-red');
        setTimeout(() => this.elements.stage.classList.remove('flash-red'), 300);
        this.playSound(audio.hurt);
        this.triggerComic();
      } else {
        this.score = Math.max(0, this.score - 15);
        this.elements.stage.classList.add('flash-blue');
        setTimeout(() => this.elements.stage.classList.remove('flash-blue'), 300);
        this.playSound(audio.hurt);
        this.showFloatScore(pRect.left, pRect.top, "-15", "red");
      }
    }
    
    this.updateUI();
    if (this.lives <= 0) this.gameOver();
  },

  triggerComic() {
    this.elements.comic.classList.add('show');
    this.playSound(audio.false);
    setTimeout(() => this.elements.comic.classList.remove('show'), 2000);
  },

  showFloatScore(x, y, text, color = "#ffcc00") {
    const el = document.createElement('div');
    el.className = 'float-score';
    el.textContent = text;
    el.style.color = color;
    el.style.left = x + 'px';
    el.style.top = y + 'px';
    this.elements.stage.appendChild(el);
    setTimeout(() => el.remove(), 800);
  },

  updateUI() {
    this.elements.score.innerText = this.score;
    let hearts = "";
    for(let i=0; i<3; i++) hearts += i < this.lives ? "â¤ï¸" : "ğŸ–¤";
    this.elements.lives.innerText = hearts;
  },

  gameOver() {
    this.active = false;
    audio.bgm.pause();
    this.elements.finalScore.innerText = this.score;
    this.elements.endScreen.classList.add('active');
    if(this.score < 100) this.playSound(audio.low);
  },

  playSound(snd) {
    snd.currentTime = 0;
    snd.play().catch(() => {});
  }
};

window.onload = () => game.init();

</script>
</body>
</html>
